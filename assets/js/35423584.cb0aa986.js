"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[5870],{3905:function(e,n,t){t.d(n,{Zo:function(){return l},kt:function(){return p}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function u(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var c=a.createContext({}),s=function(e){var n=a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},l=function(e){var n=s(e.components);return a.createElement(c.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,l=u(e,["components","mdxType","originalType","parentName"]),m=s(t),p=r,f=m["".concat(c,".").concat(p)]||m[p]||d[p]||i;return t?a.createElement(f,o(o({ref:n},l),{},{components:t})):a.createElement(f,o({ref:n},l))}));function p(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=m;var u={};for(var c in n)hasOwnProperty.call(n,c)&&(u[c]=n[c]);u.originalType=e,u.mdxType="string"==typeof e?e:r,o[1]=u;for(var s=2;s<i;s++)o[s]=t[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},2173:function(e,n,t){t.r(n),t.d(n,{assets:function(){return l},contentTitle:function(){return c},default:function(){return p},frontMatter:function(){return u},metadata:function(){return s},toc:function(){return d}});var a=t(3117),r=t(102),i=(t(7294),t(3905)),o=["components"],u={title:"\u83dc\u5355\u914d\u7f6e",order:9},c=void 0,s={unversionedId:"guide/advanced/menu",id:"guide/advanced/menu",title:"\u83dc\u5355\u914d\u7f6e",description:"\u5728 Pro \u6a21\u677f\u4e2d\uff0c\u83dc\u5355\u6309\u7167\u4e00\u5b9a\u7684\u7ea6\u5b9a\u8fdb\u884c\u914d\u7f6e\uff0c\u7528\u6765\u63cf\u8ff0\u83dc\u5355\u680f\u7684\u7ed3\u6784\u5173\u7cfb\u3002\u4ee5 BasicLayout \u5e03\u5c40\u4e3a\u4f8b\uff0c\u83dc\u5355\u914d\u7f6e\u6587\u4ef6\u7ea6\u5b9a\u5728 src/layouts/BasicLayout/menuConfig.ts\u4e2d\u3002",source:"@site/docs/guide/advanced/menu.md",sourceDirName:"guide/advanced",slug:"/guide/advanced/menu",permalink:"/docs/guide/advanced/menu",draft:!1,editUrl:"https://github.com/ice-lab/site/edit/master/docs/guide/advanced/menu.md",tags:[],version:"current",frontMatter:{title:"\u83dc\u5355\u914d\u7f6e",order:9},sidebar:"docs",previous:{title:"\u6743\u9650\u7ba1\u7406",permalink:"/docs/guide/advanced/auth"},next:{title:"\u6587\u4ef6\u7ea6\u5b9a\u5f0f\u8def\u7531",permalink:"/docs/guide/advanced/convention-routing"}},l={},d=[{value:"\u57fa\u672c\u914d\u7f6e",id:"\u57fa\u672c\u914d\u7f6e",level:2},{value:"\u83dc\u5355\u56fe\u6807",id:"\u83dc\u5355\u56fe\u6807",level:2},{value:"\u83dc\u5355\u6743\u9650",id:"\u83dc\u5355\u6743\u9650",level:2}],m={toc:d};function p(e){var n=e.components,t=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"\u5728 ",(0,i.kt)("a",{parentName:"p",href:"https://unpkg.com/@alifd/fusion-design-pro-js@0.1.23/build/index.html#/dashboard/analysis"},"Pro")," \u6a21\u677f\u4e2d\uff0c\u83dc\u5355\u6309\u7167\u4e00\u5b9a\u7684\u7ea6\u5b9a\u8fdb\u884c\u914d\u7f6e\uff0c\u7528\u6765\u63cf\u8ff0\u83dc\u5355\u680f\u7684\u7ed3\u6784\u5173\u7cfb\u3002\u4ee5 ",(0,i.kt)("inlineCode",{parentName:"p"},"BasicLayout")," \u5e03\u5c40\u4e3a\u4f8b\uff0c\u83dc\u5355\u914d\u7f6e\u6587\u4ef6\u7ea6\u5b9a\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"src/layouts/BasicLayout/menuConfig.ts"),"\u4e2d\u3002"),(0,i.kt)("h2",{id:"\u57fa\u672c\u914d\u7f6e"},"\u57fa\u672c\u914d\u7f6e"),(0,i.kt)("p",null,"\u83dc\u5355\u914d\u7f6e\u5305\u542b headerMenuConfig \u548c asideMenuConfig \u4e24\u79cd\u5f62\u5f0f\uff0cheaderMenuConfig \u7528\u4e8e\u9876\u90e8\u83dc\u5355\u680f\u7684\u6e32\u67d3\uff0casideMenuConfig \u7528\u4e8e\u4fa7\u8fb9\u83dc\u5355\u680f\u7684\u6e32\u67d3\uff0c\u8fd9\u6837\u65b9\u4fbf\u5728\u7edf\u4e00\u7684\u4f4d\u7f6e\u7ba1\u7406\u5e94\u7528\u5e03\u5c40\u7684\u83dc\u5355\u4fe1\u606f\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},"// \u9876\u90e8\u83dc\u5355\u680f\u914d\u7f6e\nexport const headerMenuConfig = [\n  {\n    name: 'Home', // \u83dc\u5355\u540d\u79f0\n    path: '/', // \u83dc\u5355\u8def\u5f84\n    icon: 'message', // \u83dc\u5355\u56fe\u6807\n  },\n];\n// \u4fa7\u8fb9\u83dc\u5355\u680f\u914d\u7f6e\nexport const asideMenuConfig = [\n  {\n    name: 'Dashboard', // \u4e00\u7ea7\u83dc\u5355\u540d\u79f0\n    path: '/', // \u4e00\u7ea7\u83dc\u5355\u8def\u5f84\n    icon: 'edit', // \u4e00\u7ea7\u83dc\u5355\u56fe\u6807\n    // \u4e8c\u7ea7\u83dc\u5355\u914d\u7f6e\n    children: [\n      {\n        name: 'Analysis', // \u4e8c\u7ea7\u83dc\u5355\u540d\u79f0\n        path: '/dashboard/analysis', // \u4e8c\u7ea7\u83dc\u5355\u8def\u5f84\n      },\n      {\n        name: 'DashboardChild',\n        path: '/',\n        icon: 'add',\n        // \u4e09\u7ea7\u83dc\u5355\u914d\u7f6e\n        children: [\n          {\n            name: 'Monitor', // \u4e09\u7ea7\u83dc\u5355\u540d\u79f0\n            path: '/dashboard/monitor', // \u4e09\u7ea7\u83dc\u5355\u8def\u5f84\n          },\n        ],\n      },\n    ],\n  },\n  // ...\n];\n")),(0,i.kt)("p",null,"\u5b8c\u6574\u7684\u83dc\u5355\u6e32\u67d3\u903b\u8f91\u53ef\u53c2\u8003 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/alibaba-fusion/materials/blob/master/scaffolds/scaffold-lite/src/layouts/BasicLayout/components/PageNav/index.tsx"},"src/layouts/BasicLayout/components/PageNav/index.tsx"),"\u3002"),(0,i.kt)("h2",{id:"\u83dc\u5355\u56fe\u6807"},"\u83dc\u5355\u56fe\u6807"),(0,i.kt)("p",null,"\u6211\u4eec\u9ed8\u8ba4\u4f7f\u7528 ",(0,i.kt)("a",{parentName:"p",href:"/docs/fusion/components/general/Icon"},"Icon")," \u8fd9\u4e2a\u7ec4\u4ef6\u6e32\u67d3\u56fe\u6807\uff0c\u53ef\u4ee5\u4f7f\u7528\u54ea\u4e9b\u56fe\u6807\u53ef\u4ee5\u5728\u7ec4\u4ef6\u6587\u6863\u4e2d\u770b\u5230\uff0c\u5982\u679c\u6709\u5176\u4ed6\u81ea\u5b9a\u4e49\u7684\u56fe\u6807\u9700\u6c42\uff0c\u5c06\u4ee3\u7801\u6539\u4e3a\u5bf9\u5e94\u56fe\u6807\u7ec4\u4ef6\u5373\u53ef\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx"},"<SubNav key={item.name} icon={item.icon} label={item.name}>\n  {childrenItems}\n</SubNav>\n")),(0,i.kt)("h2",{id:"\u83dc\u5355\u6743\u9650"},"\u83dc\u5355\u6743\u9650"),(0,i.kt)("p",null,"\u9996\u5148\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"src/layouts/BasicLayout/menuConfig.ts")," \u4e2d\u589e\u52a0\u4ee5\u4e0b\u7684\u5185\u5bb9\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-diff"},"export const asideMenuConfig = [\n  {\n    name: 'Home',\n    path: '/',\n+   auth: ['guest']\n  },\n];\n")),(0,i.kt)("p",null,"\u7136\u540e\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"src/layouts/BasicLayout/components/PageNav/index.tsx"),"\u4e2d\u914d\u7f6e\u4ee5\u4e0b\u5185\u5bb9\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-diff"},"+ import { useAuth } from 'ice';\n\n- function getNavMenuItems(menusData, initIndex) {\n+ function getNavMenuItems(menusData, initIndex, auth) {\n\n- return menusData\n-   .filter(item => item.name && !item.hideInMenu)\n-   .map((item, index) => {\n-     return getSubMenuOrItem(item, `${initIndex}-${index}`);\n-   });\n+ return menusData.filter(item => {\n+   let roleAuth = true;\n+   if (auth && item.auth && item.auth instanceof Array) {\n+     if (item.auth.length) {\n+       // \u83b7\u53d6\u5f53\u524d\u7528\u6237\u662f\u5426\u6709\u8be5\u83dc\u5355\u7684\u6743\u9650\n+       roleAuth = item.auth.some(key => auth[key]);\n+     }\n+   }\n+   return item.name && !item.hideInMenu && roleAuth;\n+ }).map((item, index) => {\n+   getSubMenuOrItem(item, `${initIndex}-${index}`, auth)\n+ });\n}\n\n- function getSubMenuOrItem(item, index) {\n+ function getSubMenuOrItem(item, index, auth) {\n  if (item.children && item.children.some(child => child.name)) {\n-   const childrenItems = getNavMenuItems(item.children, index);\n+   const childrenItems = getNavMenuItems(item.children, index, auth);\n    // ...\n  }\n}\n\nconst Navigation = () => {\n  // \u83b7\u53d6\u6743\u9650\u6570\u636e \u66f4\u591a\u6743\u9650\u7ba1\u7406\u7684\u5185\u5bb9\u53ef\u4ee5\u53c2\u8003: https://ice.work/guide/advanced/auth.html\n+ const [auth] = useAuth();\n  return (\n    <Nav embeddable activeDirection=\"right\">\n-     {getNavMenuItems(asideMenuConfig, 0)}\n+     {getNavMenuItems(asideMenuConfig, 0, auth)}\n    </Nav>\n  )\n}\n")),(0,i.kt)("p",null,"\u5b8c\u6574\u7684\u83dc\u5355\u6743\u9650\u5b9e\u73b0\u53ef\u53c2\u8003 ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/alibaba-fusion/materials/blob/master/scaffolds/fusion-design-pro/src/layouts/BasicLayout/components/PageNav/index.tsx"},"src/layouts/BasicLayout/components/PageNav/index.tsx"),"\u3002"))}p.isMDXComponent=!0}}]);